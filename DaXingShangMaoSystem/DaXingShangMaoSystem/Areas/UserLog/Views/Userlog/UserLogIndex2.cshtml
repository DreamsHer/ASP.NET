
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>用户注册</title>
    <link href="~/Content/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.bsgrid-1.37/merged/bsgrid.all.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.bsgrid-1.37/css/skins/grid_bootstrap.min.css" rel="stylesheet" />
    <style type="text/css">
        /*重置默认的外边距和内边距*/
*{
    margin:0;
    padding:0;
}
/*常用标签的样式重置*/
i{
    font-style: normal;
}
a{
    text-decoration: none;
}
input{
    outline: none;
    border:none;

    
}
/*设定html和body的宽度为100%*/
html,body{
    width:100%; 
    font: 14px/150% tahoma,arial,Microsoft YaHei,Hiragino Sans GB,"\u5b8b\u4f53",sans-serif;
    -webkit-font-smoothing: antialiased;
    color: #666;
}
/*头部*/
.logo{
	width: 160px;
    height:50px;
    background: url(../img/icon.png) no-repeat;
    position: absolute;
    top:20px;
    left:20px;
}
.desc{
	font-size: 18px;
    line-height: 34px;
    border-left: 1px solid #ccc;
    position: absolute;
    left: 200px;
    top:28px;
    padding-left: 20px;
    font-weight:bold;
}
header{
	width:100%;
    height: 110px;
    box-shadow: 10px 10px 10px rgba(111,111,111,.5);
    position: relative;
}
/*注册信息*/
/*总体布局*/
form{
	width: 400px;
	margin: auto;
	margin-top: 100px;
}
.register-box{
	border: 1px solid #ddd;
    margin-bottom: 32px;
}
.register-box label{
	height: 52px;
    line-height: 52px;
    padding-left: 20px;
    display: inline-block;
}
.register-box input{
	width: 190px;
    height: 19px;
    padding-bottom: 11px;
    padding-left: 20px;
    padding-top: 16px;
    font-size: 14px;
    color: #666;
    font-family: "Microsoft YaHei","Hiragino Sans GB";
}
.register-box .tips{
	position: absolute;
    margin-top: 5px;
    font-size: 14px;
    color: #ccc;
}
/*用户名*/
.register-box .username_label{
	word-spacing: 10px;
}
/*密码，确认密码，*/
.register-box .other_label{
	word-spacing: 2px;
}
/*手机号*/
.register-box span{
    display: inline-block;
    width: 77px;
    height: 52px;
    border-right: 1px solid #ddd;
}
.register-box .phone{
	padding-left: 18px;
}
/*验证码*/
#code{
	display: inline-block;
    width: 100px;
    height: 46px;
    vertical-align: middle;
    background-color: black;
    font-size: 25px;
    color: #fff;
    text-align: center;
    line-height: 46px;
}
/*协议*/
.arguement{
	margin-bottom: 58px;
}
.arguement input{
	vertical-align: middle;
}
.arguement a{
	color: #38f;
    text-decoration: none;
    font-size: 12px;
}
/*提交按钮*/
.submit_btn button{
	width: 100%;
    height: 54px;
    color: #fff;
    background: #e22;
    border: 0;
    font-size: 16px;
    font-family: "Microsoft YaHei","Hiragino Sans GB";
}

         </style>
</head>
<body>
    <div> 
        <form action="">
		<div class="register-box">
					<label for="username" class="username_label">用 户 名
			<input maxlength="20" type="text" placeholder="您的用户名和登录名">
					</label>
			<div class="tips">
						
					</div>
		</div>
		<div class="register-box">
			<label for="username" class="other_label">设 置 密 码
			<input maxlength="20" type="password" placeholder="建议至少使用两种字符组合">
			</label>
			<div class="tips">
				
			</div>
		</div>
		<div class="register-box">
			<label for="username" class="other_label">确 认 密 码
			<input maxlength="20" type="password" placeholder="请再次输入密码">
			</label>
			<div class="tips">
				
			</div>
		</div>
		<div class="register-box">
			<label for="username" class="other_label">
			<span>中国 0086∨</span>
			<input class="phone" maxlength="20" type="text" placeholder="建议使用常用手机">
			</label>
			<div class="tips">
				
			</div>
		</div>
		<div class="register-box">
			<label for="username" class="other_label">验 证 码
			<input maxlength="20" type="text" placeholder="请输入验证码">
			</label>
			<span id="code"></span>
			<div class="tips">
				
			</div>
		</div>
		<div class="arguement">
					<input type="checkbox" id="xieyi">
			阅读并同意
			<a href="#">《京东用户注册协议》</a>
			<a href="#">《隐私政策》</a>
			<div class="tips">
				
			</div>
				</div>
		<div class="submit_btn">
					<button type="submit" id="submit_btn">立 即 注 册</button>
				</div>
	</form>

    </div>
    <script src="~/Content/bootstrap-3.3.7-dist/js/jquery-1.11.2.min.js"></script>
    <script src="~/Content/bootstrap-3.3.7-dist/js/jquery-2.0.3.min.js"></script>
    <script src="~/Content/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="~/Content/jquery.bsgrid-1.37/merged/bsgrid.all.min.js"></script>
    <script src="~/Content/jquery.bsgrid-1.37/js/lang/grid.zh-CN.min.js"></script>
    <script src="~/Content/layer/layer.js"></script>
    <script src="~/Content/js/jquery.form.js"></script>
    <script src="~/Content/js/customfunction.js"></script>
    <script type="text/javascript">
        $(function () {
            var stuList = getStuList();//设置传送信息：学生的集合

            //聚焦失焦input
            $('input').eq(0).focus(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("支持中文，字母，数字，'-'，'_'的多种组合");
                }
            })
            $('input').eq(1).focus(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("建议使用字母、数字和符号两种以上的组合，6-20个字符");
                }
            })
            $('input').eq(2).focus(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("请再次输入密码");
                }
            })
            $('input').eq(3).focus(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("验证完后，你可以使用该手机登陆和找回密码");
                }
            })
            $('input').eq(4).focus(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next().next("div").text("看不清？点击图片更换验证码");
                }
            })
            //input各种判断
            //用户名：
            $('input').eq(0).blur(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("");
                    $(this).parent().next("div").css("color", '#ccc');
                } else if ($(this).val().length > 0 && $(this).val().length < 4) {
                    $(this).parent().next("div").text("长度只能在4-20个字符之间");
                    $(this).parent().next("div").css("color", 'red');
                } else if ($(this).val().length >= 4 && !isNaN($(this).val())) {
                    $(this).parent().next("div").text("用户名不能为纯数字");
                    $(this).parent().next("div").css("color", 'red');
                } else {
                    for (var m = 0; m < stuList.length; m++) {
                        if ($(this).val() == stuList[m].name) {
                            $(this).parent().next("div").text("该用户名已被注册");
                            $(this).parent().next("div").css("color", 'red');
                            return;
                        }
                    }
                    $(this).parent().next("div").text("");
                }
            })
            //密码
            $('input').eq(1).blur(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("");
                    $(this).parent().next("div").css("color", '#ccc');
                } else if ($(this).val().length > 0 && $(this).val().length < 6) {
                    $(this).parent().next("div").text("长度只能在6-20个字符之间");
                    $(this).parent().next("div").css("color", 'red');
                } else {
                    $(this).parent().next("div").text("");
                }
            })
            //	确认密码
            $('input').eq(2).blur(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("");
                    $(this).parent().next("div").css("color", '#ccc');
                } else if ($(this).val() != $('input').eq(1).val()) {
                    $(this).parent().next("div").text("两次密码不匹配");
                    $(this).parent().next("div").css("color", 'red');
                } else {
                    $(this).parent().next("div").text("");
                }
            })
            //	手机号
            $('input').eq(3).blur(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next("div").text("");
                    $(this).parent().next("div").css("color", '#ccc');
                } else if ($(this).val().substr(0, 3) != 138 && $(this).val().substr(0, 3) != 189 && $(this).val().substr(0, 3) != 139 && $(this).val().substr(0, 3) != 158 && $(this).val().substr(0, 3) != 188 && $(this).val().substr(0, 3) != 157 || $(this).val().length != 11) {
                    $(this).parent().next("div").text("手机号格式不正确");
                    $(this).parent().next("div").css("color", 'red');
                } else {
                    $(this).parent().next("div").text("");
                }
            })
            // 	验证码
            //	 验证码刷新
            function code() {
                var str = "qwertyuiopasdfghjklzxcvbnm1234567890QWERTYUIOPLKJHGFDSAZXCVBNM";
                var str1 = 0;
                for (var i = 0; i < 4; i++) {
                    str1 += str.charAt(Math.floor(Math.random() * 62))
                }
                str1 = str1.substring(1)
                $("#code").text(str1);
            }
            code();
            $("#code").click(code);
            //	验证码验证
            $('input').eq(4).blur(function () {
                if ($(this).val().length == 0) {
                    $(this).parent().next().next("div").text("");
                    $(this).parent().next().next("div").css("color", '#ccc');
                } else if ($(this).val().toUpperCase() != $("#code").text().toUpperCase()) {
                    $(this).parent().next().next("div").text("验证码不正确");
                    $(this).parent().next().next("div").css("color", 'red');
                } else {
                    $(this).parent().next().next("div").text("");
                }
            })
            //	提交按钮
            $("#submit_btn").click(function (e) {
                for (var j = 0 ; j < 5; j++) {
                    if ($('input').eq(j).val().length == 0) {
                        $('input').eq(j).focus();
                        if (j == 4) {
                            $('input').eq(j).parent().next().next("div").text("此处不能为空");
                            $('input').eq(j).parent().next().next("div").css("color", 'red');
                            e.preventDefault();
                            return;
                        }
                        $('input').eq(j).parent().next(".tips").text("此处不能为空");
                        $('input').eq(j).parent().next(".tips").css("color", 'red');
                        e.preventDefault();
                        return;
                    }
                }
                //协议
                if ($("#xieyi")[0].checked) {
                    //向变量stuList数组添加一个数值，数值内部格式Student(name,password,tel,id)
                    //发送用户信息
                    stuList.push(new Student($('input').eq(0).val(), $('input').eq(1).val(), $('input').eq(3).val(), stuList.length + 1));
                    localStorage.setItem('stuList', JSON.stringify(stuList));
                    alert("注册成功");
                    window.open("userlist.html", "_blank");
                } else {
                    $("#xieyi").next().next().next(".tips").text("请勾选协议");
                    $("#xieyi").next().next().next(".tips").css("color", 'red');
                    e.preventDefault();
                    return;
                }
            })

            //  建立构造函数，构造学生信息模板
            function Student(name, password, tel, id) {
                this.name = name;
                this.password = password;
                this.tel = tel;
                this.id = id;
            }
            //	获取之前所有已经注册的用户集合
            function getStuList() {
                var list = localStorage.getItem('stuList');
                if (list != null) {
                    return JSON.parse(list);
                } else {
                    return new Array();
                }
            }

        })

    </script>
</body>
</html>
